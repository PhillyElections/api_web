<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
    <title>Test Autocomplete</title>
    <script src="/js/jquery-1.8.2.min.js"></script>
</head>

<body>
    <h1>{{ hello }}</h1>
    <form id="address_form" action="" method="get">
        <input type="text" name="address" id="address" />
        <div id="selections"></div>
    </form>
    <script>
    $(function() {
        'use strict';

        function getList(address) {
            var payload = {};
            payload['callback'] = 'back';
            payload['address'] = address;
            return $.ajax({
                url: "autocomplete",
                type: "get",
                data: payload
            });
        }
        $('#address_form').on('keyup', '#address', function() {
            console.log('keyup', this.value);
            if ( this.value.length > 2 ) {
            	getList(this.value).done(function(data){
            		//console.log(data);
            		$.each(data,function(datum){console.log(data[datum]);});
            	});
            }
        });
    });
    </script>
</body>

</html>